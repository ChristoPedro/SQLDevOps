version: 0.1
component: build
timeoutInSeconds: 6000
shell: bash
env:
  variables:
    "TNS_ADMIN" : "/tmp"
    "walletocid" : "ocid1.autonomousdatabase.oc1.sa-saopaulo-1.antxeljrtsbrckqajpv4tee3rdqlgtuwy7dzuja3qe2hpvq7l3dbb5abnvua"

steps:
  - type: Command
    name: "download sqlc"
    timeoutInSeconds: 10
    command: wget -q https://download.oracle.com/otn_software/java/sqldeveloper/sqlcl-21.4.0.348.1716.zip -P /tmp
  - type: Command
    name: "unzip sqlc"
    timeoutInSeconds: 10
    command: unzip /tmp/sqlcl-21.4.0.348.1716.zip -d /tmp
  - type: Command
    timeoutInSeconds: 10
    name: "GetWallet"
    command: oci db autonomous-database generate-wallet --autonomous-database-id $walletocid --file adwwallet.zip --password Oracle123456
  - type: Command
    timeoutInSeconds: 5
    shell: /bin/sh
    name: "execute sqlcl"
    command: /tmp/sqlcl/bin/sql -l -s admin/Oracle123456@aepx_high  < teste.sql